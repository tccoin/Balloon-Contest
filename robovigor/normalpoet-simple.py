# -*- coding: UTF-8 -*-
# 电子诗人
# 想法来自刘慈欣 http://blog.sina.com.cn/s/blog_540d5e800101aikv.html
# 语法及词汇来自 https://github.com/iwestlin/lab/blob/master/poet/main.js
import random

class NormalPoet:
    def __init__(self, grammar, vocabulary):
        '''这里把grammar, vocabulary保存成对象的属性'''
        self.grammar = grammar
        self.vocabulary = vocabulary
    def get_random_word(self, wordlist):
        '''这里传入一个list，然后返回这个list中的任意元素'''
        return wordlist[random.randint(0,len(wordlist)-1)]
    def nianshi(self):
        '''这里通过get_random_word随机取一种grammar，然后用string.replace替换grammar中的成分'''
        sentence = self.get_random_word(self.grammar)
        replacements = [x for x in self.vocabulary.keys() if x in sentence]
        for replacement in replacements:
            while replacement in sentence:
                random_word = self.get_random_word(self.vocabulary[replacement])
                sentence = sentence.replace(replacement, random_word, 1)
        return sentence
    def __iter__(self):
        '''返回一个迭代器'''
        return self
    def __next__(self):
        '''返回一句诗'''
        return self.nianshi()


if __name__ == '__main__':

    # init grammar and vocabulary
    grammar = ['MM在DD', 'XX的MM在DD', 'MM是XX的', 'TTXX的MM', '从MM到MM', '从XX的MM到XX的MM', 'MMDJMM', 'XX的MMDJXX的MM', '让MM变得XX吧', 'TTXX的MM', '在MM的MM', 'TTXX的MM和XX的MMXX的MM和MM', 'TTDD着XX的MM和XX的MM', '为了MMMM在DD着', 'MM不再XX地DD', 'TTMM在DD', 'TTMM在DD', 'TTTTTT', 'TTMMMM和MM', 'TTMM', 'TT我的MM', 'TT我的XX的MM', '我要DJ你', '你DJ我吧', 'DD吧', 'MMDD吧', 'DD吧XX的MM', 'MM是XX的', 'DD吧MM', '因为MM是XX的', '如果MM已经DD了你就DD吧', '如果MM是XX的你就DD吧', '我是MM我是MM', '我是XX的MM我是XX的MM', '你是MM你是XX的MM', '当MMDD时我要DD', 'MMMMMM', 'MM把MMDJ了', '我是MM不是MM', 'MM把我DJ吧', '你把我DJ吧', 'MM曾经是XX的', 'TTMM是多么XX', '看MM是多么XX', '我DD直到MM已经DD', '在那MM旁我DD着', '你是我的MM我是你的MM', '你是我的XX的MM', '你就像XX的MM', '想从前MM是多么XX', 'MMXX地DJ着MM', 'XX的MM像MM', 'MM请DD吧', 'MM是XX的但他已经DD了', 'TT她是我的XX的MM', '在MM中MM在DD', '在MM里XX的MM在DD', '在MM旁MM在DD', '我看到XX的MM在DD着', '我看到XX的MM在DDMM在DJ着MM', '我面对着XX的MM和XX的MM', '在这XX的MM中没有MM只有MM', 'MMMM和MM在一起DD着', '我想DD我想XX地DD', 'TTMM是如此的XX', 'TT我多想XX地DD', '我们都是XX的MM我们要DD', 'MM在DJMM', 'MM在DJ着MM', 'MM在DJ着XX的MM', 'MM我要DJ你', 'XX的MM我想DJ你', '在那XX的MMMM在DJ着MM', 'MM般的MM在DD', '让MMDD吧', 'MM不再DD了', '对着XX的MM我DD着', 'XX的MM从MM飞来', 'XX的MM向MM飞去', 'MMXX得DD', 'MMXX得象MM', '我XX得DD', '你XX得象MM', 'MM被DD得DD', 'MM被DD得像MM', '到处都是MM到处都是MM', '到处都是XX的MM和XX的MM', '是的这就是XX的MM', '只要MM仍然是XX的MM就会DD下去', '只要MM仍然在DDMM就还是XX的', 'TT我的MM我的MM我的MM', 'TT一切都在DD着', '一切都是XX的', '一切都是XX的只有MM是XX的', '一切都在DD着只有MM在DD', 'MM被DJ了', '在MM的周围只有XX的MM', '不我不想DD', '并不是MM在DD而是MMDD了', 'MM不是XX的而是XX的', '我在DJMM', 'XX的MM开始DD了', 'TT这XX的MM这XX的MM啊', 'TT这XX的MM啊', 'MMDD了MMDD了', 'XX的MMDD了', 'XX的MM已经DD了', '我DD了', 'XXXXXX', 'XX的XX的和XX的', 'XX的MMXX的MM和XX的MM', 'XX在MM上出现', 'XX在MM上DD', 'MM是XX的是XX的是XX的', 'TTXX的XX的XX的MM', 'XX的XX的和XX的MM在DD', 'TTXX的XX的XX的XX的MM', 'MM和MM和MM和MM还有MM都在DD', 'XX的MM和XX的MM和XX的MM还有XX的MM都在DD', 'MM是XX的XX的XX的XX的而且还是XX的', '从MM到MM从MM到MM从MM到MM从MM到MM', '我要DD我要DD我要DD我要DD我还要DD呢', 'DD吧DD吧DD吧DD吧XX的MM', 'MM和MM和MM和MM还有MM在一起DD着', 'XX的MMXX的MMXX的MM还有XX的MM在同时DD着', 'TT我的MM我的MM我的MM我的MM和我的MM', 'TTMM在DDMM在DDMM在DDXX的MM在DD', 'TTXX的MMXX的MMXX的MM和XX的MM', '我想DD我想DD我想DD我想DD我还想DD', '到处是MM到处是MM到处是MM到处是XX的MM', 'TT我是MM我是MM我是MM我是MM我还是XX的MM', '我在DJMM在DJMM在DJMM在DJMM还在DJMM', '一切都在DD一切都在DD一切都在DD啊', '因为MM是XX的', '所以MM是XX的', '因为MM在DD', '所以MM在DD']
    vocabulary = {}
    vocabulary['DD'] = ['蒸发', '磁化', '撕杀', '氧化', '互相残杀', '升华', '雾化', '自杀', '挥发', '被磁化', '自杀', '谈话', '磨擦', '说梦话', '说胡话', '倒下', '垂死挣扎', '挣扎', '叽叽喳喳', '徘徊', '醒来', '感慨', '变白', '衰败', '发呆', '默哀', '怀念', '思念', '睡眠', '握拳', '谈判', '冬眠', '热恋', '呼喊', '沉淀', '哭喊', '腐烂', '思恋', '飞旋', '狼吞虎咽', '会谈', '生息繁衍', '悲叹', '变酸', '长吁短叹', '鸟瞰', '长叹', '冒烟', '发酸', '盘旋', '眨眼', '交谈', '急转弯', '飞旋', '欢宴', '旋转', '漂荡', '结霜', '下降', '变黄', '惊慌', '游荡', '欢唱', '歌唱', '生长', '成长', '忧伤', '闪亮', '震荡', '漂游四方', '云游四方', '发光', '闪光', '云游四方', '游荡四方', '发痒', '死亡', '绝望', '仰望', '幻想', '相撞', '碰撞', '膨胀', '飞翔', '鼓掌', '梦想', '拥抱', '祈祷', '上吊', '互相拥抱', '拥抱', '大叫', '发烧', '起泡', '没命地跑', '发高烧', '飞跑', '跑啊跑不停地跑', '号叫', '以光速奔跑', '跑', '燃烧', '衰老', '思考', '嘶叫', '叫', '冷笑', '狂跳', '互相撕咬', '相视而笑', '痴笑', '咆哮', '欢笑', '欢跳', '相对而笑', '念叨', '回眸', '咬', '大笑', '笑', '高歌', '跋涉', '陨落', '下落', '吃喝', '陷落', '喷射', '变色', '传播', '结合', '散热', '休克', '跳迪斯科', '沉默', '复活', '猜测', '吃喝', '飘落', '被淹没', '发热', '跳跃', '述说', '演说', '爱着', '思索', '探索', '收缩', '冷却', '破裂', '互相焊接', '熄灭', '断裂', '自我毁灭', '分解', '迎接', '互相粘接', '落叶', '高高地飞', '飞', '飞啊飞不停地飞', '交配', '自毁', '发黑', '发霉', '碰杯', '反胃', '变味', '枯蒌', '思维', '甸伏行进', '被囚禁', '射门', '绷紧', '打滚', '下沉', '弹琴', '飞奔', '消沉', '翻滚', '停顿', '发困', '接吻', '谈心', '狂饮', '互相吸引', '吸引', '吻', '互相吻', '发生诣振', '磨损', '打盹', '亲吻', '低吟', '上升', '稳定', '苏醒', '长眠不醒', '远行', '以光速飞行', '痛疼', '沸腾', '飞扑升腾', '升腾', '高兴', '远征', '堆积', '沉积', '电离', '被电击', '抽搐', '推理', '互相撞击', '打击', '歇斯底里', '哭泣', '自暴自弃', '喘粗气', '喘气', '皱起', '抽泣', '昏迷', '窒息', '梦呓', '叹息', '回忆', '喘息', '呼吸', '失明', '生病', '结冰', '憧憬', '喝酒', '招手', '握手', '怒吼', '格斗', '发抖', '颤抖', '渗漏', '翘首', '挥手', '拍手', '战斗', '祈求', '搏斗', '漂游', '梦游', '潜游', '起皱', '伴奏', '走', '行走', '走啊走不停地走', '摇头', '抬头', '点头', '走动', '摆动', '做梦', '震动', '游动', '挥动', '滑动', '抖动', '走动', '滚动', '转动', '波动', '流动', '闪动', '振动', '脉动', '晃动', '变红', '肚子痛', '游泳', '剧痛', '松弛', '飞驰', '展翅', '互相排斥', '结识', '发誓', '窥视', '腐蚀', '自我吞食', '吹笛子', '枯死', '反思', '繁殖', '发紫', '短路', '赶路', '痛哭', '散步', '哭', '吸毒', '互相哭述', '凝固', '叽叽咕咕', '漂浮', '成熟', '互相追逐', '呕吐', '跳舞', '忘情地跳舞', '跳霹雳舞', '复苏', '打呼噜', '远足', '加速', '沉睡', '崩溃', '下坠', '午睡', '变绿', '隐居', '弯曲', '扭曲', '窃窃私语', '发育', '生育', '默默无语', '相对无语']
    vocabulary['DJ'] = ['刺杀', '喝下', '咒骂', '磨擦', '轰炸', '刮', '溶化', '痛打', '磁化', '淡化', '大骂', '谋杀', '锤打', '攻打', '冲刷', '润滑', '暗杀', '拧开', '踢开', '离开', '旋开', '谋害', '避开', '击败', '击穿', '计算', '污染', '表演', '欺骗', '诱骗', '装扮', '折断', '推翻', '想念', '思念', '充满', '驱赶', '追赶', '扮演', '倍伴', '传染', '清点', '呼唤', '替换', '观看', '回想', '杀伤', '向往', '梦想', '扑向', '走向', '碰撞', '猛撞', '击倒', '哀悼', '警告', '拥抱', '浸泡', '啃咬', '寻找', '塑造', '撕咬', '辐照', '咬', '取笑', '嘲笑', '解放了', '烤', '反射', '中和', '压迫', '抚摸', '揉搓', '劝说', '弹射', '照射', '接过', '获得', '诱惑', '捕获', '触摸', '紧握', '拍摄', '走过', '教唆', '刻写', '看着', '数着', '搓着', '警惕着', '读着', '唱着', '舔着', '释放着', '嗅着', '画着', '挽着', '写着', '戏弄着', '揉着', '玩耍着', '盯着', '理解', '送别', '撕裂', '追猎', '迎接', '侵略', '处决', '告别', '分解', '消灭', '包围', '击毁', '面对', '抛掷', '涌进', '围困', '贴近', '凑近', '扎进', '钻进', '狂饮', '入侵', '狂吻', '吻', '挤进', '手刃', '追寻', '审问', '滋润', '勾引', '吸引', '炖', '邀请', '嘲讽', '战胜', '远征', '回忆', '冲击', '攻击', '偷袭', '呼吸', '奇袭', '刺激', '躲避', '冲洗', '炮击', '撞击', '击毙', '举起', '逃避', '打击', '拾起', '袭击', '铲起', '轰击', '清理', '寻觅', '挑起', '猛击', '跳起', '代替', '倾听', '聆听', '引诱', '接受', '梦游', '追求', '接受', '传播', '挽救', '送走', '狠揍', '递送', '传送', '欢送', '挥动', '击中', '进攻', '背诵', '追踪', '跟踪', '杀死', '监视', '刺死', '解释', '处死', '吞食', '讽刺', '怒视', '打死', '掐死', '腐蚀', '腌制', '挤出', '跳出', '进入', '侮辱', '追捕', '追逐', '羞辱', '涌出', '驱逐', '钻出', '透出', '潜入', '跳入', '冲出', '欺负', '吸入', '挖苦', '俘虏', '朗读', '激怒', '爱抚', '煮', '扭住', '握住', '捏住', '抱住', '压住', '追随', '跟随', '咬碎', '击溃', '撕碎', '培育', '养育', '猎取']
    vocabulary['TT'] = ['啊！', '噢！', '嘘！', '唉！', '呀！', '喔！', '哈！', '咦！', '啊呀！', '唉呀呀！', '哦！', '欧！', '哈哈哈哈！', '哦！', '天啊！']
    vocabulary['XX'] = ['哗哗啦啦', '宏大', '无穷大', '高大', '光滑', '无限大', '宽大', '博大', '大大', '狡滑', '庞大', '广大', '巨大', '大', '进化', '想自杀', '低下', '高电压', '飞快', '凉快', '可爱', '明快', '低矮', '矮矮', '失败', '洁白', '和蔼', '五彩', '七彩', '十二彩', '气态', '固态', '液态', '等离子态', '病态', '如阴沟般狭窄', '狭窄', '无边', '童话般', '金灿灿', '史诗般', '多变', '波光灿灿', '光灿灿', '凶残', '黄金般', '伟岸', '黑暗', '阴暗', '不安', '远在天边', '精悍', '斑烂', '干旱', '尖尖', '久旱', '充满性感', '高入云端', '矫健', '勇敢', '纷乱', '失恋', '多愁善感', '敏感', '可怜', '混乱', '强健', '平淡', '灿烂', '有质感', '严寒', '淡', '咸', '爱玩', '恶浪滔天', '浊浪滔天', '平坦', '甜', '有限', '浪漫', '波光闪闪', '金光闪闪', '酸', '杂乱', '银光闪闪', '近在眼前', '温暖', '无限', '柔软', '天然', '浅浅', '无源', '浑圆', '多元', '圆', '悠远', '剌眼', '妙不可言', '少言', '遥远', '深远', '神经失常', '辉煌', '细长', '漫长', '浩浩荡荡', '源远流长', '无限长', '欢畅', '疯狂', '欣喜若狂', '金壁辉煌', '荒凉', '凉', '健康', '清凉', '光亮', '善良', '明亮', '流浪', '无风三尺浪', '摇摇晃晃', '粗放', '金黄', '喜欢光', '迷茫', '白茫茫', '爱忧伤', '无希望', '爱失望', '忧伤', '芳香', '幽香', '爱飞翔', '肥胖', '清香', '吵嚷', '高尚', '爱幻想', '绝望', '失望', '充满幻想', '理想', '嗡嗡响', '吱吱响', '喧响', '内向', '哗哗响', '呜呜响', '杂乱无章', '健壮', '肮脏', '胶状', '无包装', '悠扬', '喜欢太阳', '纷纷扬扬', '有营养', '彷徨', '有包装', '勾心斗角', '广角', '哇哇叫', '多角', '高傲', '高高', '清高', '粗糙', '深奥', '孤傲', '可靠', '残暴', '苦恼', '喜欢笑', '爱笑', '微小', '娇小', '微小', '如沙粒般渺小', '渺小', '小小', '爱跑', '细小', '静悄悄', '吵闹', '短小', '多毛', '爱闹', '灵巧', '陡峭', '幼小', '爱跳', '无穷小', '弱小', '小', '干燥', '人造', '可恶', '朝气逢勃', '温和', '爱唱歌', '险恶', '生机勃勃', '深不可测', '犬牙交错', '凶恶', '喜欢火', '模棱两可', '清彻', '宽阔', '欢乐', '薄薄', '如火', '浅薄', '广阔', '活', '神经衰弱', '软弱', '炎热', '叶绿色', '琥珀色', '十二色', '黑色', '土色', '橙色', '青色', '奶色', '天蓝色', '女孩子嘴唇的红色', '玫瑰色', '紫罗兰色', '闷热', '褐色', '古铜色', '牛奶色', '灰色', '幸福鸟肚皮的白色', '海蓝色', '热', '下落', '火热', '失落', '惊心动魄', '酷热', '唇红色', '光芒四射', '笑着', '飞着', '活着', '运动着', '唱着', '亮着', '热着', '走着', '曲折', '曲曲折折', '呼吸着', '哭着', '浑浊', '跑着', '精神分裂', '爱睡觉', '纯结', '高洁', '光洁', '精确', '怛怯', '准确', '多血', '凛冽', '累', '有曲线美', '柔美', '绝美', '多方位', '娇美', '枯萎', '垂危', '秀美', '有线条美', '春光明媚', '优美', '健美', '娇媚', '死气沉沉', '筋疲力尽', '不对称', '险峻', '凶狠', '波翻浪滚', '阴沉', '五彩缤纷', '对称', '无尽', '繁花似锦', '神经过敏', '歌泣鬼神', '烦死人', '粗心', '多心', '苦闷', '伤心', '和蔼可亲', '沉闷', '吵死人', '恼人', '诱人', '实心', '湿润', '阴森', '偏离重心', '博大精深', '无重心', '深深', '慢吞吞', '高温', '天真', '爱打盹', '不平衡', '寒冷', '人工合成', '冷', '永恒', '悄然无声', '如梦般迷蒙', '杂草丛生', '数不清', '荆棘丛生', '多情', '下升', '高能', '旺盛', '痛不欲生', '方方正正', '无机', '可望不可及', '湍急', '无边无际', '有机', '歇斯底里', '光怪陆离', '有魅力', '深不见底', '死寂', '低低', '有吸引力', '风和日丽', '卑鄙', '美丽', '低声下气', '无声无息', '狂喜', '纤细', '尖细', '整齐', '淘气', '有灵气', '稠密', '充满生气', '哭哭泣泣', '多疑', '爱回忆', '变异', '静静', '安静', '纯净', '稳定', '不稳定', '文静', '寂静', '干净', '风平浪静', '高兴', '水晶般透明', '聪明', '正多边形', '星形', '放射形', '形', '型', '多面形', '无名', '多边形', '轰鸣', '型', '透明', '起伏不平', '泥泞', '碱性', '酸性', '互相平行', '锥形', '阶梯形', '针形', '流行', '崎形', '螺线形', '六角形', '十字形', '五边形', '坚硬', '橄榄形', '两性', '半球形', '强磁性', '锯齿形', '菱形', '弧形', '正方形', '蛋形', '水晶般晶莹', '树枝形', '形', '中性', '螺旋形', '波浪形', '无形', '双曲线形', '双蛋形', '雪茄形', '八角形', '圆柱形', '蛇形', '半圆形', '十二角形', '球形', '三角形', '曲线形', '弓形', '水滴形', '宝塔形', '犁形', '晶莹', '悠久', '厚厚', '温柔', '温柔', '欠收', '爱不释手', '丰收', '慢悠悠', '有节奏', '晃晃悠悠', '年幼', '轰轰', '激动', '多孔', '火红', '紫红', '惊恐', '骚动', '中空', '鬼影幢幢', '轰轰隆隆', '郁郁葱葱', '稀松', '高耸', '宽松', '无穷', '沉重', '英勇', '汹涌', '来无影去无踪', '大比重', '冰冻三尺', '枯死', '潮湿', '死', '无知', '单原子', '垂直', '多剌', '多汁', '乐不可支', '多原子', '互相垂直', '粘滞', '大密度', '苦', '痛苦', '喜欢哭', '黑乎乎', '高密度', '恐怖', '爱哭', '干枯', '孤独', '同步', '迷路', '大角度', '软浮', '模糊', '如宇宙般深遂', '深遂', '粗俗', '爱跳舞', '光秃秃', '无数', '不可胜数', '荒芜', '魁悟', '剌目', '不成对', '脆', '成对', '充满智慧', '有规律', '碧绿', '橄榄绿', '无规律', '弯弯曲曲', '有趣', '柔声细语', '犹豫', '无序', '有序', '迷途']
    vocabulary['MM'] = ['工程车','弹药箱','高尔夫球','饭桶']

    # create a poet
    poet = NormalPoet(grammar, vocabulary)

    # use loop to nianshi
    for i in range(10):
        print(poet.nianshi())